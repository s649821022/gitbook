#### 数据库事务

事务是指作为单个逻辑执行的一系列操作，这些操作具有原子性，即这些操作要么完全执行，要么完全不执行。事务处理可以确保事务性单元内的所有操作都成功完成，否则不会执行数据操作

事务应该具有4个属性：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability），这4个属性通常称为ACID特性，说明如下

- 原子性：一个事务是一个不可分割的工作单位，事务中包括的操作要么都做，要么都不做
- 一致性：事务必须使数据库从某个一致性状态变到另一个一致性状态，一致性与原子性是密切相关的
- 隔离性：一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对其他事务是隔离的，各个事务之间不能相互干扰
- 持久性：指一个事务一旦提交，它对数据库中数据的改变应该是永久性的，其他操作或故障不应该对其有任何影响



Django的事务定义在`transaction.py`文件中，常用方法如下：

- atomic()： 在视图函数或视图类里使用事务
- savepoint()：开启事务
- savepoint_rollback()：回滚事务
- savepoint_commit()：提交事务

